# Daily Study
## Daily Plan
#todo
- [x] 写博客
- [ ] 总结内存异常排查步骤
- [ ] 
## Eino
### 流式处理的优势
架构设计的支持：
- 在graph中，节点和边都内置了流式处理的逻辑，自动处理数据流的类型转换和状态传递，通过全局状态存储中间结果，支持流式处理的上下文延续
- 在类型安全上，定义了统一的流式处理方法，同时会在编译阶段就验证流式接口的正确性（例如文本流输入到图像处理）
核心机制：
- 自动流式转换：包括非流式输入的流式封装
## 创新资助申请
课题：基于openGuass的数据库网络安全威胁及漏洞研究

### 研究背景

在当今数字化浪潮中，数据已成为企业最核心的战略资产。随着云原生架构和大数据技术的迅猛发展，企业能够前所未有地存储、处理并分析海量信息，从而洞察市场趋势、优化运营流程并强化决策支持。在此背景下，openGauss 凭借其对 SQL-2003 标准的全面兼容、主备多副本高可用部署能力，正日益成为政务、金融、运营商等关键行业构建高性能关系型数据库的首选平台。

然而，随着 openGauss 在各类业务场景中的广泛应用，其所承载的敏感数据规模与安全责任也在不断攀升。一旦 openGauss Server、DataKit 或数据迁移工具集（如 gs_portal、datachecker）等关键组件在网络层或应用层存在漏洞，攻击者便可能通过 SQL 注入、权限提升或中间人攻击等手段篡改、窃取或破坏数据，给客户带来严重的合规风险与信誉损失。

因此，本课题旨在构建一套面向 openGauss 全栈组件的网络安全研究体系，系统化地识别各模块潜在威胁，构建覆盖注入攻击、权限滥用与数据泄露等场景的安全测试与攻击用例，并在此基础上设计端到端的防护框架与原型实现。通过深入分析组件交互的安全边界、强化通信加固、完善运行时监控与响应机制，期望为企业在保障数据可用性和合规性的同时，提供一套可复制、可持续演进的数据库安全解决方案。
### 拟解决的关键问题


问题一：openGauss Server、DataKit、gs_rep_portal 与 datachecker 等关键组件可能存在 SQL 注入、命令注入、RPC 参数篡改及权限提升等多种网络安全威胁，社区对这些组件的静态代码审计和动态模糊测试支持不足，缺少覆盖所有接口的攻击用例库及持续化回归能力。如何系统化识别 openGauss 关键模块的网络安全风险，并构建覆盖注入、提权与数据泄露等场景的安全测试与攻击用例库？

问题二：关键模块通信链路安全薄弱，openGauss Server、DataKit 与数据迁移工具集（gs_rep_portal、datachecker）之间的网络通信缺乏统一加固策略，默认配置下可能出现明文传输、TLS 配置错误或证书管理不当，容易被中间人（MITM）、重放或协议降级攻击所利用。如何牢固构建 openGauss 系统的安全边界，确保 Server、DataKit 与数据迁移工具间的网络通信和数据传输安全？

问题三：当前对关键模块的加固和检测往往停留在单点实践，缺乏与 CI/CD 流水线的集成，无法实现持续化安全验证与回归检测。
openGauss 原生审计日志可导出至 Elasticsearch/HTTP ，但缺少与 SIEM 平台的多维度关联分析和精细化告警策略，尚未形成“发现→防护→验证→优化”的闭环流程，安全团队难以及时将测试结果与改进建议反馈至源码和社区实践指南。如何构建集 SCA、DAST、审计告警及自动化反馈于一体的端到端安全闭环，实现对 openGauss 全生命周期持续化的安全治理？

### 研究内容与技术路线



网络安全学院学生创新资助计划三期
#### 问题一关键模块网络安全风险研究与攻击用例构
基于问题一，我认为

#### 问题二安全链路加固
基于问题一，我认为首先要基于 STRIDE 方法对openGauss server与datakit、数据迁移工具集(gs_portal、datachecker）等关键模块交互流量的进出路径进行全面建模，识别出欺骗、篡改、信息泄露等场景，形成相应威胁用例库。然后针对组件中的默认TLS配置和证书管理，进行提升并设计相应的自动化证书签发与轮换机制，提高安全性。最后基于透明加密与完整性校验理念，对比部署 IPsec 与 WireGuard 的吞吐与延迟，选取最优方案为server、datakit和数据迁移工具集等关键模块实现隧道封装方案来保证链路通信安全

#### 问题三安全防护与响应闭环
基于问题三，我认为要构建一个自动化渗透与实时审计告警的平台。首先要集成 SCA、动态扫描与自定义渗透脚本，实现对关键模块的持续漏洞检测，同时对社区发布的安全补丁执行二次验证，生成回归测试报告，确保补丁覆盖所有威胁用例且不引入性能或功能回归。然后启用 openGauss 原生审计功能，将关键 DDL/DML 操作写入平台进行联动，实现多维度异常检测与可视化告警。最后建立“发现 → 防护 → 验证 → 优化”闭环流程，与 openGauss 安全团队深度协作，定期汇报评估结果并推动最佳实践落地。




## 问题二的解决思路

我认为基于关键模块间通信链路易受中间人、重放及协议降级攻击的现状，首先要采用 STRIDE 方法对 openGauss Server、DataKit 及数据迁移工具集（gs_portal、datachecker）之间的进出流量进行建模，系统化识别欺骗（Spoofing）、篡改（Tampering）、信息泄露（Information Disclosure）等典型威胁场景，并由此形成覆盖面广泛的威胁用例库。接着，基于现有 TLS 默认配置的薄弱性，设计并实现自动化的证书签发与轮换机制，将所有组件默认升级至 TLS1.3，并在证书即将到期或校验失败时自动发起更新，以消除人为配置失误带来的风险。最后，围绕“透明加密＋完整性校验”理念，对比评估 IPsec 与 WireGuard 在百毫秒级延迟与千级 TPS 吞吐下的表现，并选取最优方案为上述关键模块构建轻量级隧道封装，确保流量全程机密性与不可篡改性。

研究内容集中在：

- 构建基于 STRIDE 的网络威胁用例库，覆盖 Server↔DataKit、Server↔gs_portal、Server↔datachecker 等交互路径；
    
- 设计可插拔的自动化证书生命周期管理组件，实现全链路 TLS 强制升级；
    
- 基于 WireGuard（或 IPsec）实现透明隧道封装，并开展性能与安全评估对比。

研究内容集中在构建基于 STRIDE 的网络威胁用例库，覆盖 Server↔DataKit、Server↔gs_portal、Server↔datachecker 等交互路径，并设计可插拔的自动化证书生命周期管理组件，实现全链路 TLS 强制升级，最后基于 WireGuard（或 IPsec）实现透明隧道封装，并开展性能与安全评估对比。

技术路线分为三个主要步骤：

1. **威胁建模与用例库构建**：
    
    - 利用 STRIDE 方法梳理组件间所有网络入口与出口，绘制通信拓扑与数据流图；
        
    - 针对每条数据流定义欺骗、篡改、泄露等威胁场景，编写可复用的渗透测试脚本，形成威胁用例库。
        
2. **自动化证书管理设计**：
    
    - 在配置中心集成证书签发接口，支持批量生成、分发与安装；
        
    - 实现轮换策略：到期前 7 天自动预警并更新，异常状态自动回滚与重试。
        
3. **隧道封装方案实施**：
    
    - 部署 WireGuard（或 IPsec）隧道，配置密钥与策略，实现透明加密与完整性校验；
        
    - 通过压力测试与安全测试评估延迟、吞吐与抗攻击能力，选择最优方案并形成部署手册。
        

---


---

## 问题三的解决思路

我认为解决单点部署防护后无法持续验证和优化的问题，需要构建“自动化渗透 → 实时审计 → 告警响应 → 持续优化”四步闭环平台。首先在 CI/CD 流程中集成 SCA、动态扫描及自定义渗透脚本，实现关键模块的持续漏洞探测，并对社区安全补丁进行二次回归验证，保证补丁既能覆盖所有威胁用例又无功能或性能回归。其次，启用 openGauss 原生审计，将关键 DDL/DML 操作及 Hook 告警写入 ELK/SIEM 平台，开展多维度关联分析与可视化监控。再次，基于审计流和渗透结果，设定多级告警策略（如连续异常操作触发实例隔离或短信通知），并在安全事件发生后自动生成修复建议。最后，围绕“发现→防护→验证→优化”闭环，定期召开评估会并与 openGauss 社区安全团队协作，将改进意见反馈至项目源码和实践指南，实现安全治理的持续迭代。

研究内容集中在：

- 集成开源与自研工具，打造自动化渗透与补丁验证流水线；
    
- 利用审计日志与安全中心，构建多维度实时告警与可视化平台；
    
- 建立安全事件闭环流程，实现防护措施的持续验证与优化反馈。
    

技术路线分为三个主要步骤：

1. **自动化渗透与补丁回归**：
    
    - 在 CI/CD 中接入 SCA、DAST、渗透脚本，定期评估 Server、DataKit、gs_portal、datachecker；
        
    - 对社区安全补丁做二次测试，输出覆盖率与性能回归报告。
        
2. **实时审计与告警平台**：
    
    - 配置 openGauss 审计功能，将日志导入 ELK/SIEM，构建多维度告警模型；
        
    - 设定告警级别与响应动作（隔离、通知、自动修复建议）。
        
3. **安全闭环与持续优化**：
    
    - 定期汇总渗透与审计数据，召开评估会，形成改进方案；
        
    - 与 openGauss 社区同步最佳实践，并发布工具、文档与用例，实现持续迭代。

## 问题一的解决思路

针对问题一，我觉得 openGauss Server、DataKit、gs_portal、datachecker 等关键模块可能存在的注入攻击、权限提升、数据泄露等网络安全风险，本方案首先通过社区 CVE 与安全公告梳理已知漏洞，结合代码审计与动态扫描，构建风险分类目录 ；其次，深入研究 SQL 注入（Injection）、命令注入、RPC 参数篡改等典型攻击手法，并基于OWASP ESAPI标准，制定正则白名单、输出编码与参数化接口的统一输入校验库 ；随后，采用模糊测试（Fuzzing）技术，利用 AFL++、libFuzzer、Honggfuzz 等开源工具，对关键组件接口进行变异输入测试，挖掘未知漏洞 ；最后，将所有注入、提权与泄露场景整理成安全测试与攻击用例库，并集成于 CI/CD 自动化测试管道，实现持续化回归验证。

### 研究内容集中在：
将已知漏洞与代码审计驱动的风险进行分类，基于WASP ESAPI驱动的理念设计统一的输入校验库；
    
-WASP ESAPI 驱动的统一输入校验库设计；
    
- 基于开源模糊测试工具的漏洞发现与用例生成；
    
- 注入、提权与泄露攻击用例库构建与维护。
    
基于开源模糊测试工具的漏洞发现与用例生成，专门针对openGauss关键模块的注入攻击、权限提升、数据泄露等网络安全风险的研究
### 技术路线分为三个主要步骤：

1. **风险识别与分类**
    
    - 调研 openGauss CVE 与社区安全公告；
        
    - 对 Server、DataKit、gs_portal、datachecker 源码进行静态审计与动态扫描。
        
2. **攻击用例库构建**
    
    - 汇总 SQL 注入、命令注入、RPC 篡改、权限提升、数据泄露等手法；
        
    - 利用 AFL++、libFuzzer、Honggfuzz 等工具生成模糊测试脚本。
        
3. **CI/CD 集成与回归验证**
    
    - 在 Jenkins/GitLab CI 中植入自动化测试任务；
        
    - 定时执行攻击用例集，输出覆盖率与风险回归报告。

可行性研究
### 针对问题一：关键模块通信链路安全加固

基于 STRIDE 方法的威胁建模和用例库构建可行性高：STRIDE 已被 OWASP 广泛认可，用于系统化识别欺骗（Spoofing）、篡改（Tampering）、信息泄露（Information Disclosure）等威胁场景，并配有成熟的工具（如 Threat Dragon）支持快速落地。openGauss 原生支持 TLS1.2/1.3，社区文档已说明其通信协议封装方式，为自动化升级到 TLS1.3 提供了清晰路径。证书自动化管理可依托现有 CA/CDN 提供的自动签发与轮换接口，成熟案例（如 RedstagLabs 的自动化流程）保证了高可用环境下的可靠性与安全性。WireGuard 与 IPsec 在多项对比测试中已证明性能优越，WireGuard 平均可提升约15%吞吐、降低20%延迟，适合对延迟和吞吐要求严格的数据库通信场景。

### 针对问题二：关键模块安全风险研究与用例构建

对 Server、DataKit、gs_portal、datachecker 等组件进行静态审计与动态扫描具有工具和经验基础：OWASP ESAPI 提供了成熟的输入校验库设计模式，可适配多种攻击面（SQL、Shell、REST）并显著减少注入风险。AFL++ 等开源模糊测试工具具备对网络服务的最佳实践文档与插件支持，可在二进制和源码级别挖掘未知漏洞。将模糊测试与脚本化审计结合，可实现高覆盖率的自动化用例生成，并通过 CI/CD 管道持续回归验证。

### 针对问题三：安全防护与响应闭环

构建“自动化渗透→实时审计→告警响应→持续优化”的闭环平台是可行且先进的——多家厂商和开源社区已在 CI/CD 中集成 SCA（如 Veracode SCA）、DAST（如 OWASP ZAP），并与 SIEM 系统联动实现实时监控和告警。openGauss 的原生审计功能支持将关键操作日志输出至 ELK/SIEM，为多维度关联分析提供了可靠数据来源。第三方 SIEM 集成方案（如 Oracle Audit Vault）已验证了数据库审计与 SIEM 的无缝对接，可为 openGauss 实例带来实时、可视化的安全监控能力


## 五、急需突破的关键技术及主要创新点

| 技术序号                    | 技术名称                                                                                                                                                                        | 急需解决的问题                                                   | 主要创新点                                                                                                                                              |
| ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| 技术一                     | 通信链路自动化加固与性能优化                                                                                                                                                              | openGauss Server、DataKit 与迁移工具缺乏统一的链路加固方案，易受中间人、重放及协议降级攻击 | • 设计自动化 TLS1.3 强制部署流水线，结合证书签发与轮换服务，实现全链路“即插即用”加密；• 动态部署 WireGuard 隧道，通过一键化脚本完成密钥协商、通道监控与故障切换；• 引入微基准测试框架，实时评估隧道延迟和吞吐，自动调整加密套件与隧道参数，实现“安全—性能”自适应平衡。 |
| 技术二                     | 基于模糊测试的网络服务漏洞挖掘                                                                                                                                                             | 对网络服务（RPC/REST）接口的模糊测试支持不足，难以全面发现注入、参数篡改等漏洞               | • 针对 openGauss 关键模块定制 AFL++ 模糊测试插件，实现对 RPC/REST 接口的变异测试和覆盖率分析；• 引入并行化调度与动态反馈机制，提升模糊测试效率与漏洞发现速度。                                                    |
| 技术三                     | 安全闭环平台与实时可视化                                                                                                                                                                | 缺乏将 SCA、DAST、审计日志与告警响应整合于一体的持续安全验证平台                      | • 集成 Veracode SCA、OWASP ZAP DAST 与 openGauss 原生审计日志，在 CI/CD 管道中实现端到端安全扫描与回归验证；• 构建统一可视化面板，关联漏洞、补丁、告警和修复状态，实现“发现→防护→验证→优化”闭环管理。                     |
| 开始日期 – 结束日期             | 主要工作内容                                                                                                                                                                      | 预期目标                                                      | 绩效指标                                                                                                                                               |
| 2025.04.30 – 2025.07.30 | **阶段一：威胁建模与初步风险评估**1. 基于 STRIDE 方法梳理 Server、DataKit、gs_rep_portal、datachecker 间所有数据流2. 开发并执行首批渗透测试脚本，形成初始威胁用例库                                                              | 完成全链路威胁模型，并输出首版 ≥20 条典型威胁用例                               | - 绘制通信拓扑与数据流图- 生成 ≥20 条可执行渗透脚本- 渗透测试覆盖率 ≥80%                                                                                                       |
| 2025.07.30 – 2025.10.29 | **阶段二：关键模块安全分析与漏洞挖掘**  <br>1. 针对 Server、DataKit、gs_rep_portal、datachecker，开展静态代码审计与动态扫描  <br>2. 基于 AFL++/libFuzzer 等搭建模糊测试环境，进行接口变异测试与异常场景触发  <br>3. 汇总并分类新发掘的注入、提权、数据泄露等漏洞 | 深入分析四大关键组件安全风险，挖掘并验证 ≥5 个新漏洞，形成系统化漏洞清单                    | -- 新发现漏洞 ≥5 个  <br>- 漏洞分类覆盖注入、提权、泄露至少三大类型  <br>- 安全风险评估覆盖率 100%                                                                                    |
| 2025.10.30 – 2026.01.29 | **阶段三：链路加固原型开发与性能评估**1. 实现全链路 TLS1.3 强制策略与自动化证书轮换服务2. 部署并对比 WireGuard 与 IPsec 隧道的性能与安全性                                                                                     | 完成可插拔的链路加固原型，确保证书自动管理与隧道封装在测试环境中稳定运行                      | - 全链路 TLS1.3 启用率 100%- 隧道部署脚本“一键化”完成- 性能开销 ≤5%（延迟与吞吐）                                                                                              |
| 2026.01.30 – 2026.04.29 | **阶段四：安全闭环平台集成与文档社区贡献**1. 在 CI/CD 流水线中集成 SCA、DAST、自动化用例执行与补丁回归2. 启用审计日志联动告警并完善“发现→防护→验证→优化”闭环流程3. 撰写项目报告、使用手册，向 openGauss 社区提交工具与用例                                         | 完成端到端安全闭环平台集成，并形成可复用的部署文档与社区贡献包                           | - CI/CD 安全扫描成功率 ≥95%- 审计告警平均响应时间 ≤30 分钟- 发布 ≥3 篇文档，并提交 ≥1 次社区合并请求                                                                                  |